<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delivery Note</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="dn-page" id="print-page">
      <header class="dn-banner">
        <div class="dn-branding">
          <div class="dn-logo">
            <img src="logo.png" alt="GoDam Logo" />
          </div>
          <div class="dn-brand-details">
            <p class="dn-brand-name">Gulf Applications</p>
            <p>Apartment 5001, 50th Floor, Kingdom Tower</p>
            <p>P.O Box 89098, Riyadh, Saudi Arabia</p>
            <p>Tel.: +966 11 47 28 256</p>
            <p>Fax: +966 11 47 81 503</p>
            <p>https://www.gapp.sa</p>
          </div>
        </div>
        <div class="dn-title-block">
          <div class="dn-document-title" data-en="DELIVERY NOTE" data-ar="شهادة تسليم">DELIVERY NOTE</div>
          <div id="dn-incomplete" class="dn-incomplete-flag">⚠ INCOMPLETE DELIVERY NOTE</div>
          <div class="dn-meta-compact">
            <span>DN No:</span>
            <strong data-bind="dnNumber">DN20260101093045</strong>
          </div>
        </div>
      </header>
      <div class="dn-header">
        <div class="dn-card dn-metadata-card">
          <div class="dn-card-title" data-en="Document Details" data-ar="تفاصيل المستند">
            Document Details
          </div>
          <div class="dn-metadata-grid">
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="Date:" data-ar="التاريخ:">Date:</span>
              <span class="dn-metadata-value" data-bind="dnDate">01 Jan 2026</span>
            </div>
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="GAPP SO:" data-ar="GAPP SO:">GAPP SO:</span>
              <span class="dn-metadata-value" data-bind="gappPo">SO-45892</span>
            </div>
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="Customer PO:" data-ar="PO العميل:">Customer PO:</span>
              <span class="dn-metadata-value" data-bind="customerPo">PO-77812</span>
            </div>
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="Outbound:" data-ar="الصادر:">Outbound:</span>
              <span class="dn-metadata-value" data-bind="outboundNumber">OUT-2026-001</span>
            </div>
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="Invoice No:" data-ar="رقم الفاتورة:">Invoice No:</span>
              <span class="dn-metadata-value" data-bind="invoice">INV-9021</span>
            </div>
            <div class="dn-metadata-item">
              <span class="dn-metadata-label" data-en="Products:" data-ar="المنتجات:">Products:</span>
              <span class="dn-metadata-value" data-bind="products">N/A</span>
            </div>
          </div>
        </div>

        <div class="dn-card">
          <div class="dn-card-title" data-en="DELIVERY TO" data-ar="التسليم إلى">
            DELIVERY TO
          </div>
          <div class="dn-card-content">
            <span class="dn-line customer-name-bold" data-bind="customerDisplayName">Customer Company Name</span>
            <span class="dn-line" data-bind="customerAddress">123 Industrial Area, Riyadh 12345</span>
            <a
              id="google-location"
              class="dn-link"
              data-bind="googleLocation"
              href="#"
              target="_blank"
              >https://maps.google.com/?q=location</a
            >

            <div class="receiver-section">
              <div class="receiver-label" data-en="Receiver 1" data-ar="المستلم 1">Receiver 1</div>
              <div class="dn-dot">
                <span data-en="Name:" data-ar="الاسم:">Name:</span>
                <span class="receiver-value" data-bind="receiver1Name">Ahmed Al-Mohammed</span>
              </div>
              <div class="dn-dot">
                <span data-en="Mobile:" data-ar="الجوال:">Mobile:</span>
                <span class="receiver-value" data-bind="receiver1Phone">+966 50 123 4567</span>
              </div>
            </div>

            <div class="receiver-section">
              <div class="receiver-label" data-en="Receiver 2" data-ar="المستلم 2">Receiver 2</div>
              <div class="dn-dot">
                <span data-en="Name:" data-ar="الاسم:">Name:</span>
                <span class="receiver-value" data-bind="receiver2Name">Mohammed Al-Ahmed</span>
              </div>
              <div class="dn-dot">
                <span data-en="Mobile:" data-ar="الجوال:">Mobile:</span>
                <span class="receiver-value" data-bind="receiver2Phone">+966 55 987 6543</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <section class="items-section">
        <div class="customer-name-emphasis" data-bind="customerDisplayName">Customer Company Name</div>
        <table class="dn-table">
          <thead>
            <tr>
              <th>#</th>
              <th class="part-col" data-en="Part Number" data-ar="رقم القطعة">Part Number</th>
              <th class="desc-col" data-en="Description" data-ar="الوصف">Description</th>
              <th class="qty-col" data-en="Qty" data-ar="الكمية">Qty</th>
              <th data-en="UOM" data-ar="الوحدة">UOM</th>
              <th class="condition-col" data-en="Condition" data-ar="الحالة">Condition</th>
            </tr>
          </thead>
          <tbody id="items-body"></tbody>
        </table>
      </section>

      <section class="dn-totals-section">
        <div class="totals-row">
          <div class="total-item">
            <span class="total-label" data-en="Total Quantity:" data-ar="الكمية الإجمالية:">Total Quantity:</span>
            <strong class="total-value" data-bind="totalCases">12</strong>
          </div>
          <div class="total-item">
            <span class="total-label" data-en="Total Weight (KG):" data-ar="الوزن الإجمالي (كجم):">Total Weight (KG):</span>
            <strong class="total-value" data-bind="grossWeight">1,250</strong>
          </div>
          <div class="total-item">
            <span class="total-label" data-en="Total Volume (CBM):" data-ar="الحجم الإجمالي (م³):">Total Volume (CBM):</span>
            <strong class="total-value" data-bind="volume">8.5</strong>
          </div>
          <div class="total-item">
            <span class="total-label" data-en="Number of Pallets:" data-ar="عدد المنصات:">Number of Pallets:</span>
            <strong class="total-value" data-bind="pallets">0</strong>
          </div>
        </div>
      </section>

      <section class="delivery-mode-section">
        <div class="delivery-mode-title" data-en="DELIVERY TYPE" data-ar="نوع التسليم">DELIVERY TYPE</div>

        <div id="logistics-transporter" class="logistics-mode" style="display: none;">
          <div class="dn-drivers">
            <div class="dn-driver-head">
              <span data-en="Transporter" data-ar="الناقل">Transporter</span>
              <span data-en="Driver Name" data-ar="اسم السائق">Driver Name</span>
              <span data-en="Vehicle Type" data-ar="نوع المركبة">Vehicle Type</span>
              <span data-en="Qty" data-ar="الكمية">Qty</span>
            </div>
            <div id="drivers-body"></div>
          </div>
        </div>

        <div id="logistics-courier" class="logistics-mode" style="display: none;">
          <div class="logistics-info-row">
            <span class="logistics-label" data-en="Courier Company:" data-ar="شركة البريد:">Courier Company:</span>
            <span class="logistics-value" data-bind="courierCompany">Ajex Logistics</span>
          </div>
          <div class="logistics-info-row">
            <span class="logistics-label" data-en="Waybill:" data-ar="بوليصة الشحن:">Waybill:</span>
            <span class="logistics-value" data-bind="courierWaybill">A102XXXXXX</span>
          </div>
        </div>

        <div id="logistics-direct" class="logistics-mode" style="display: none;">
          <div class="logistics-info-row">
            <span class="logistics-label" data-en="Remarks:" data-ar="ملاحظات:">Remarks:</span>
            <span class="logistics-value" data-bind="directRemarks">_______________________________</span>
          </div>
        </div>
      </section>

      <section class="dn-mandatory-receiver">
        <div class="mandatory-label" data-en="MANDATORY" data-ar="إلزامي">MANDATORY</div>
        <div class="signature-cards">
          <div class="signature-card">
            <div class="signature-card-title" data-en="CUSTOMER SIGN" data-ar="توقيع العميل">CUSTOMER SIGN</div>
            <div class="signature-card-fields">
              <div class="dn-dot">
                <span data-en="Name" data-ar="الاسم">Name</span>
                <span class="dots-long"></span>
              </div>
              <div class="dn-dot">
                <span data-en="Mobile" data-ar="الجوال">Mobile</span>
                <span class="dots-long"></span>
              </div>
              <div class="dn-dot">
                <span data-en="Iqama No" data-ar="رقم الإقامة">Iqama No</span>
                <span class="dots-long"></span>
              </div>
              <div class="dn-dot">
                <span data-en="Sign" data-ar="التوقيع">Sign</span>
                <span class="dots-long"></span>
              </div>
            </div>
          </div>

          <div class="signature-card stamp-card">
            <div class="signature-card-title" data-en="STAMP" data-ar="الختم">STAMP</div>
            <div class="stamp-box">
              <span class="stamp-watermark" data-en="STAMP" data-ar="الختم">STAMP</span>
            </div>
          </div>
        </div>
      </section>

      <section class="dn-footer">
        <p class="dn-declaration">
          <span data-en="Any damages or shortages must be reported within 48 hours of delivery." data-ar="يجب الإبلاغ عن أي أضرار أو نقص خلال 48 ساعة من التسليم.">
            Any damages or shortages must be reported within 48 hours of delivery.
          </span>
        </p>

        <p class="dn-advertisement">
          <span data-en="Our Products: Huawei, Avaya, Hanwha, Schneider, Dauha, CommScope, Flir, Zoom, Kaspersky, LG" data-ar="منتجاتنا: Huawei, Avaya, Hanwha, Schneider, Dauha, CommScope, Flir, Zoom, Kaspersky, LG">
            Our Products: Huawei, Avaya, Hanwha, Schneider, Dauha, CommScope, Flir, Zoom, Kaspersky, LG
          </span>
        </p>

        <div class="dn-page-number">
          <span data-en="Page" data-ar="صفحة">Page</span> <span class="page-num">1</span> <span data-en="of" data-ar="من">of</span> <span class="page-total">1</span>
        </div>
      </section>
    </div>

    <script>
      const dnData = {
        dnNumber: "DN20260110114126",
        dnDate: new Date().toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" }),
        status: "COMPLETE",
        outboundNumber: "OUT-2026-001",
        gappPo: "SO-45892",
        customerPo: "PO-77812",
        invoice: "INV-9021",
        products: "N/A",
        deliveryMode: "Transporter",
        salesPerson: "NA",
        projectName: "NA",
        customerName: "Customer Company Name",
        customerDisplayName: "Customer Company Name",
        sapCustomerId: "SAP12345",
        customerAddress: "123 Industrial Area, Riyadh 12345",
        googleLocation: "https://maps.google.com/?q=location",
        receiver1Name: "Ahmed Al-Mohammed",
        receiver1Phone: "+966 50 123 4567",
        receiver2Name: "Mohammed Al-Ahmed",
        receiver2Phone: "+966 55 987 6543",
        location: "Site 12",
        warehouse: "GoDam Central Hub",
        manager: "Faisal Karim",
        locationContact: "+966 50 555 8900",
        locationEmail: "site.manager@gapp.sa",
        carrier: "Raad Al Shama",
        courierCompany: "Ajex Logistics",
        courierWaybill: "A102XXXXXX",
        directRemarks: "",
        drivers: [
          { name: "Amjad Ali", truck: "Pickup", qty: "1", transporterName: "Raad Al Shama" }
        ],
        totalCases: 12,
        grossWeight: "1,250",
        volume: "8.5",
        pallets: 0,
        preparedBy: "GoDam User",
        preparedDate: new Date().toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" }),
        quantities: [
          { partNumber: "PN-1001", description: "Sample component for testing", qty: 10, uom: "EA", condition: "New" },
          { partNumber: "PN-1002", description: "Bracket assembly", qty: 4, uom: "EA", condition: "New" },
          { partNumber: "PN-1003", description: "Fastener kit", qty: 250, uom: "PK", condition: "New" }
        ]
      };

        const populateBindings = () => {
          if (!dnData.customerDisplayName && dnData.customerName) {
            dnData.customerDisplayName = dnData.customerName;
          }

          document.querySelectorAll("[data-bind]").forEach((el) => {
            const key = el.getAttribute("data-bind");
            if (key && dnData[key] !== undefined && dnData[key] !== null && dnData[key] !== "") {
              el.textContent = dnData[key];
            } else if (key) {
              el.textContent = "";
            }
          });

          const googleLink = document.getElementById("google-location");
          if (googleLink && dnData.googleLocation) {
            googleLink.textContent = dnData.googleLocation;
            googleLink.href = dnData.googleLocation;
          }

          const incompleteFlag = document.getElementById("dn-incomplete");
          if (incompleteFlag) {
            const status = String(dnData.status || "").toUpperCase();
            incompleteFlag.style.display = status === "INCOMPLETE" ? "block" : "none";
          }

          const quantities = Array.isArray(dnData.quantities) ? dnData.quantities : [];
          const itemsBody = document.getElementById("items-body");
          if (itemsBody) {
            itemsBody.innerHTML = "";
            let totalQty = 0;
            quantities.forEach((item, index) => {
              totalQty += item.qty;
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>${index + 1}</td>
                <td>${item.partNumber || ""}</td>
                <td>${item.description || ""}</td>
                <td>${item.qty || 0}</td>
                <td>${item.uom || ""}</td>
                <td>${item.condition || ""}</td>
              `;
              itemsBody.appendChild(row);
            });
            const totalCell = document.querySelector(".total-qty");
            if (totalCell) {
              totalCell.textContent = totalQty;
            }
          }

          const deliveryMode = dnData.deliveryMode || "Transporter";
          document.getElementById("logistics-transporter").style.display = "none";
          document.getElementById("logistics-courier").style.display = "none";
          document.getElementById("logistics-direct").style.display = "none";

          if (deliveryMode === "Transporter") {
            document.getElementById("logistics-transporter").style.display = "block";
            const driverList = Array.isArray(dnData.drivers) ? dnData.drivers : [];
            const driversBody = document.getElementById("drivers-body");
            if (driversBody) {
              driversBody.innerHTML = "";
              driverList.forEach((driver) => {
                const row = document.createElement("div");
                row.className = "dn-driver-row";
                row.innerHTML = `
                  <span>${driver.transporterName || dnData.carrier || ""}</span>
                  <span>${driver.name || ""}</span>
                  <span>${driver.truck || ""}</span>
                  <span>${driver.qty || ""}</span>
                `;
                driversBody.appendChild(row);
              });
            }
          } else if (deliveryMode === "Courier") {
            document.getElementById("logistics-courier").style.display = "block";
          } else if (deliveryMode === "Direct") {
            document.getElementById("logistics-direct").style.display = "block";
          }
        };

      const setLanguage = (lang) => {
        document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
        document.querySelectorAll("[data-en][data-ar]").forEach((el) => {
          el.textContent = el.getAttribute(`data-${lang}`);
        });
      };

      document.addEventListener("DOMContentLoaded", () => {
        populateBindings();
        setLanguage("en");
      });

      window.addEventListener("message", (event) => {
        if (event.data?.type === "set-language") {
          setLanguage(event.data.lang);
        }
        if (event.data?.type === "refresh-data") {
          Object.assign(dnData, event.data.payload);
          populateBindings();
        }
      });
    </script>
  </body>
</html>
